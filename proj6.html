<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Just My Type(IP)</title>
<meta name="description" content="Look up an IP address (or your own). See type, city, region, country, ISP and map." />
<link rel="icon" href="data:,">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin />
<script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>

<style>
  :root{
    /* pinalitan ko brown aesthetic nlng suri */
    --bg:#f7f2ea;       
    --ink:#3b2f2f;         
    --muted:#7a5e57;       
    --brand:#8b5e34;       
    --brand-2:#a47148;      
    --ok:#3e7b52;           
    --card:#fffaf3;        
    --ring: 0 1px 0 rgba(20,12,8,.04), 0 12px 36px rgba(35,20,10,.10);
    --radius:16px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:
      radial-gradient(900px 500px at 10% -10%, #f1e6d7 0%, transparent 60%),
      radial-gradient(900px 500px at 110% 10%, #efe5d8 0%, transparent 60%),
      var(--bg);
    color:var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Inter, Roboto, "Helvetica Neue", Arial;
  }

  header{
    max-width:980px; margin:42px auto 18px; padding:0 20px; text-align:center;
  }
  h1{
    font-size:clamp(1.6rem, 2.4vw + 1rem, 2.2rem);
    margin:0 0 6px; letter-spacing:.2px;
  }
  .sub{color:var(--muted); font-size:.98rem}

  .wrap{max-width:980px; margin:0 auto 60px; padding:0 20px;}
  .grid{display:grid; grid-template-columns: 1.1fr .9fr; gap:22px}
  @media (max-width: 900px){ .grid{grid-template-columns:1fr} }

  .card{
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--ring);
    border:1px solid #eadfce;
    overflow:hidden;
  }
  .pad{padding:20px}

  .title{
    display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px
  }

  .badge{
    background:#efe7de; color:#5c3f29; border:1px solid #e2d3bf; font-size:.74rem;
    padding:6px 10px; border-radius:999px; font-weight:700; letter-spacing:.2px;
  }

  .row{display:flex; gap:12px; align-items:center; margin:14px 0 18px}
  .ip-input{
    flex:1; padding:14px 14px; border-radius:12px; border:1px solid #e6d8c7; outline:none;
    background:#fdf7ef; color:var(--ink); font-size:1rem;
  }
  .ip-input:focus{border-color:#d7bfa3; box-shadow:0 0 0 4px rgba(139,94,52,.14)}

  .btn{
    border:none; padding:13px 16px; border-radius:12px; cursor:pointer;
    font-weight:800; color:white;
    background:linear-gradient(160deg, var(--brand), var(--brand-2));
    transition:transform .06s ease, filter .2s ease;
  }
  .btn:hover{filter:brightness(1.04)}
  .btn:active{transform:translateY(1px)}

  .btn-ghost{
    background:#f3e8dc; color:#5b3d26; border:1px solid #e6d5c2;
  }

  .btn-wire{
    background:transparent; color:var(--brand); border:1px dashed #d9c3ad;
  }

  .kvs{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  @media (max-width:560px){ .kvs{grid-template-columns:1fr} }
  .kv{
    background:#fbf3e8; border:1px solid #efdfcc; border-radius:12px; padding:12px 14px;
  }
  .kv label{display:block; font-size:.8rem; color:var(--muted)}
  .kv div{font-weight:800; margin-top:4px; word-break:break-all}

  .copy{
    padding:8px 12px; border-radius:10px; border:1px dashed #d9c3ad; background:#f7eee4;
    font-size:.9rem; cursor:pointer; margin-left:auto; color:#5b3d26; font-weight:700;
  }

  .hint{font-size:.92rem; color:var(--muted)}
  #map{height:360px; border-top:1px solid #eadfce}

  footer{max-width:980px; margin:26px auto 40px; padding:0 20px; color:var(--muted); text-align:center}

  .toast{
    position:fixed; inset:auto 20px 20px auto; background:#2f241f; color:#fff; padding:12px 14px;
    border-radius:12px; box-shadow:var(--ring); opacity:0; transform:translateY(6px);
    transition:all .22s ease; pointer-events:none;
  }
  .toast.show{opacity:1; transform:translateY(0)}

  /* Settings drawer */
  .settings{
    position:fixed; right:20px; top:20px; z-index:9999;
    display:flex; gap:8px; align-items:center;
  }
  .drawer{
    position:fixed; right:20px; top:64px; width:320px; max-width:92vw;
    background:var(--card); border:1px solid #eadfce; border-radius:14px; box-shadow:var(--ring);
    padding:14px; display:none;
  }
  .drawer.show{display:block}
  .field{display:grid; gap:6px; margin:8px 0 10px}
  .field label{font-size:.82rem; color:var(--muted)}
  .field input, .field select{
    padding:10px 12px; border-radius:10px; border:1px solid #e6d8c7; background:#fffaf5; outline:none;
  }
</style>
</head>
<body>
  <header>
    <h1>Just My Type (IP)</h1>
    <div class="sub">Enter any IP (leave blank to use your own). We’ll show its type and where it likely geolocates.</div>
  </header>

  <!-- Tiny settings: place to put your Map Tiles API key -->
  <div class="settings">
    <button class="btn btn-wire" id="openSettings" title="Map settings">Map Settings</button>
  </div>
  <div class="drawer" id="drawer">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
      <strong style="font-size:.95rem">Map Provider</strong>
      <button class="btn btn-ghost" id="closeSettings">Close</button>
    </div>
    <p class="hint" style="margin:4px 0 10px">
      Optional: Paste a Map Tiles API key (e.g., <em>MapTiler</em>). If empty, we’ll use OpenStreetMap.
    </p>
    <div class="field">
      <label for="provider">Tiles Provider</label>
      <select id="provider">
        <option value="osm">OpenStreetMap (default)</option>
        <option value="maptiler">MapTiler (needs API key)</option>
      </select>
    </div>
    <div class="field">
      <label for="apiKey">API Key (kept in your browser only)</label>
      <input id="apiKey" placeholder="e.g. MT_your_maptiler_key_here" />
    </div>
    <div style="display:flex;gap:8px;justify-content:flex-end">
      <button class="btn btn-ghost" id="resetKey">Reset</button>
      <button class="btn" id="saveKey">Save</button>
    </div>
  </div>

  <main class="wrap grid" aria-live="polite">
    <!-- Left card: details -->
    <section class="card">
      <div class="pad">
        <div class="title">
          <div>
            <div class="badge">Instant lookup</div>
            <h2 style="margin:.4rem 0 0;font-size:1.05rem">Enter IP Address</h2>
            <div class="hint">Supports IPv4 &amp; IPv6</div>
          </div>
          <button class="copy" id="copyAll" title="Copy all results">Copy results</button>
        </div>

        <div class="row">
          <input id="ip" class="ip-input" placeholder="e.g. 8.8.8.8 or 2001:4860:4860::8888" />
          <button class="btn" id="lookup">Lookup</button>
          <button class="btn btn-ghost" id="mine" title="Use my IP">My IP</button>
        </div>

        <div class="kvs">
          <div class="kv"><label>IP Address</label><div id="ipOut">—</div></div>
          <div class="kv"><label>Type of Address</label><div id="typeOut">—</div></div>
          <div class="kv"><label>City</label><div id="cityOut">—</div></div>
          <div class="kv"><label>Region</label><div id="regionOut">—</div></div>
          <div class="kv"><label>Country</label><div id="countryOut">—</div></div>
          <div class="kv"><label>ISP</label><div id="ispOut">—</div></div>
        </div>
      </div>
      <div id="map"></div>
    </section>

    <!-- Right card: mini explainer -->
    <aside class="card pad">
      <h3 style="margin:.2rem 0 8px">What’s an IP “type”?</h3>
      <p class="hint" style="line-height:1.6">
        We classify by format &amp; routability (IPv4 vs IPv6; public vs private/reserved).
        Geolocation is approximate — usually the ISP gateway city, not your street.
      </p>
      <hr style="border:none;border-top:1px solid #eadfce;margin:16px 0">
      <ul class="hint" style="padding-left:18px; line-height:1.8">
        <li>Leave the box empty and press <em>My IP</em> to detect your address.</li>
        <li>Click <em>Copy results</em> to share a snapshot.</li>
        <li>No cookies, no tracking pixels.</li>
      </ul>
    </aside>
  </main>

  <div class="toast" id="toast">Copied!</div>
  <footer>© <span id="yr"></span> Just My Type (IP)</footer>

<script>
  const $ = s => document.querySelector(s);
  const ipIn = $("#ip");
  const fields = {
    ip: $("#ipOut"), type: $("#typeOut"), city: $("#cityOut"),
    region: $("#regionOut"), country: $("#countryOut"), isp: $("#ispOut")
  };
  $("#yr").textContent = new Date().getFullYear();

  // ── Settings drawer (Map API place) ──────────────────────────────────────────
  const drawer = $("#drawer");
  $("#openSettings").addEventListener("click", ()=> drawer.classList.add("show"));
  $("#closeSettings").addEventListener("click", ()=> drawer.classList.remove("show"));

  const providerSel = $("#provider");
  const apiKeyIn = $("#apiKey");

  // load saved
  const savedProvider = localStorage.getItem("tilesProvider") || "osm";
  const savedKey = localStorage.getItem("tilesKey") || "";
  providerSel.value = savedProvider;
  apiKeyIn.value = savedKey;

  $("#saveKey").addEventListener("click", ()=>{
    localStorage.setItem("tilesProvider", providerSel.value);
    localStorage.setItem("tilesKey", apiKeyIn.value.trim());
    drawer.classList.remove("show");
    reloadTiles();
  });
  $("#resetKey").addEventListener("click", ()=>{
    providerSel.value = "osm"; apiKeyIn.value = "";
    localStorage.removeItem("tilesProvider");
    localStorage.removeItem("tilesKey");
    reloadTiles();
  });

  // ── Map init ────────────────────────────────────────────────────────────────
  let map, marker, tileLayer;
  function makeTileLayer(){
    const provider = localStorage.getItem("tilesProvider") || "osm";
    const key = localStorage.getItem("tilesKey") || "";

    if(provider === "maptiler" && key){
      // MapTiler basic tiles (works nicely with Leaflet)
      const url = `https://api.maptiler.com/maps/basic-v2/256/{z}/{x}/{y}.png?key=${encodeURIComponent(key)}`;
      return L.tileLayer(url, { maxZoom: 19, attribution: '&copy; MapTiler &copy; OpenStreetMap' });
    }
    // Default: OSM
    return L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
      { maxZoom: 19, attribution: '&copy; OpenStreetMap' });
  }

  function initMap(){
    map = L.map('map', { zoomControl:true, attributionControl:false }).setView([20,0], 2);
    tileLayer = makeTileLayer().addTo(map);
  }

  function reloadTiles(){
    if(!map) return;
    if(tileLayer) tileLayer.remove();
    tileLayer = makeTileLayer().addTo(map);
  }

  initMap();

  // ── Validators ──────────────────────────────────────────────────────────────
  const reV4 = /^(25[0-5]|2[0-4]\d|[01]?\d\d?)(\.(25[0-5]|2[0-4]\d|[01]?\d\d?)){3}$/;
  const reV6 = /^(([0-9a-f]{1,4}:){7}[0-9a-f]{1,4}|([0-9a-f]{1,4}:){1,7}:|([0-9a-f]{1,4}:){1,6}:[0-9a-f]{1,4}|([0-9a-f]{1,4}:){1,5}(:[0-9a-f]{1,4}){1,2}|([0-9a-f]{1,4}:){1,4}(:[0-9a-f]{1,4}){1,3}|([0-9a-f]{1,4}:){1,3}(:[0-9a-f]{1,4}){1,4}|([0-9a-f]{1,4}:){1,2}(:[0-9a-f]{1,4}){1,5}|[0-9a-f]{1,4}:((:[0-9a-f]{1,4}){1,6})|:((:[0-9a-f]{1,4}){1,7})|fe80:(:[0-9a-f]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3,3}(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|([0-9a-f]{1,4}:){1,4}:((25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3,3}(25[0-5]|2[0-4]\\d|[01]?\\d\\d?))$/i;

  function kind(ip){
    if(!ip) return "Unknown";
    if(reV4.test(ip)){
      const oct = ip.split('.').map(n=>+n);
      const priv = (oct[0]===10) || (oct[0]===172 && oct[1]>=16 && oct[1]<=31) || (oct[0]===192 && oct[1]===168);
      const loop = (oct[0]===127);
      const link = (oct[0]===169 && oct[1]===254);
      if(loop) return "IPv4 • loopback";
      if(priv) return "IPv4 • private";
      if(link) return "IPv4 • link-local";
      return "IPv4 • public";
    }
    if(reV6.test(ip)){
      const lc = ip.toLowerCase();
      if(lc.startsWith("fe80")) return "IPv6 • link-local";
      if(lc.startsWith("fc") || lc.startsWith("fd")) return "IPv6 • unique local (ULA)";
      if(lc==="::1") return "IPv6 • loopback";
      return "IPv6 • global (public)";
    }
    return "Unrecognized";
  }

  // ── IP detection & lookup ───────────────────────────────────────────────────
  async function detectMyIP(){
    const [v4,v6] = await Promise.allSettled([
      fetch('https://api.ipify.org?format=json').then(r=>r.json()),
      fetch('https://api64.ipify.org?format=json').then(r=>r.json())
    ]);
    const ip = (v6.status==="fulfilled" && v6.value.ip) || (v4.status==="fulfilled" && v4.value.ip) || "";
    return ip;
  }

  async function lookup(ip){
    const targetIP = ip?.trim() || await detectMyIP();
    if(!targetIP){ paint({ip:"Unavailable", type:"—"}); return; }

    paint({ ip:"Loading…", type:"…" });

    try{
      // ✅ fixed template string
      const geo = await fetch(`https://ipapi.co/${encodeURIComponent(targetIP)}/json/`).then(r=>r.json());
      const out = {
        ip: geo.ip || targetIP,
        type: kind(targetIP),
        city: geo.city || "—",
        region: geo.region || "—",
        country: geo.country_name || geo.country || "—",
        isp: geo.org || geo.asn || "—",
        lat: parseFloat(geo.latitude), lon: parseFloat(geo.longitude)
      };
      paint(out);
      // map update
      if(!isNaN(out.lat) && !isNaN(out.lon)){
        map.setView([out.lat,out.lon], 9);
        if(marker) marker.remove();
        marker = L.marker([out.lat,out.lon]).addTo(map)
          .bindPopup(`${out.city ? out.city + ', ' : ''}${out.country}`).openPopup(); //  fixed template string
      }else{
        map.setView([20,0], 2);
        if(marker) marker.remove();
      }
    }catch(e){
      console.error(e);
      paint({ip:targetIP, type:kind(targetIP), city:"—", region:"—", country:"—", isp:"—"});
    }
  }

  function paint(d){
    fields.ip.textContent = d.ip ?? "—";
    fields.type.textContent = d.type ?? "—";
    fields.city.textContent = d.city ?? "—";
    fields.region.textContent = d.region ?? "—";
    fields.country.textContent = d.country ?? "—";
    fields.isp.textContent = d.isp ?? "—";
  }

  // UI events
  $("#lookup").addEventListener("click", ()=> lookup(ipIn.value));
  $("#mine").addEventListener("click", async ()=>{
    ipIn.value = "";
    await lookup("");
  });
  ipIn.addEventListener("keydown", e=>{ if(e.key==="Enter") $("#lookup").click(); });

  // Copy all
  $("#copyAll").addEventListener("click", ()=>{
    const text =
`IP: ${fields.ip.textContent}
Type: ${fields.type.textContent}
City: ${fields.city.textContent}
Region: ${fields.region.textContent}
Country: ${fields.country.textContent}
ISP: ${fields.isp.textContent}`;
    navigator.clipboard.writeText(text).then(()=>{
      const t=$("#toast"); t.classList.add("show");
      setTimeout(()=>t.classList.remove("show"), 1200);
    });
  });

  // initial load
  lookup("");
</script>
</body>
</html>
